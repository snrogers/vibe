@startuml

'' ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''' ''
'' Styles
'' ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''' ''
hide empty description

skinparam backgroundColor white

skinparam state {
  BackgroundColor LightYellow
  BorderColor     Black
  ArrowColor      DarkGreen
}

'' ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''' ''
'' States
'' ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''' ''
state BotMaster {
  [*]  -->  Idle
  Idle -d-> AwaitingLLM : [new message]

  AwaitingLLM -u-> StreamingResponse : LLM sends text
  AwaitingLLM -d-> HandlingToolCall  : LLM requests tool

  StreamingResponse --> Idle        : streaming complete
  HandlingToolCall  --> AwaitingLLM : tool executed


  Idle              : Waiting for a message...
  AwaitingLLM       : Sent message to LLM and waiting for response.
  HandlingToolCall  : Executing a tool as requested by the LLM.
  StreamingResponse : Receiving and emitting response chunks from LLM.
}

@enduml
